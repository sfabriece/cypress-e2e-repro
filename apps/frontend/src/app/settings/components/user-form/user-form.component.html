<div class="card padding-m flex-column gap-16">
  <h2>About you</h2>

  <form
    *ngIf="user$ | async"
    [formGroup]="userForm"
    (ngSubmit)="submit()"
    class="flex-column gap-16"
  >
    <div>
      <label
        for="firstName"
        [class.error-label]="userForm.get('firstName')?.errors && formSubmitted"
        >Firstname
        <div *ngIf="userForm.get('firstName')?.errors && formSubmitted">
          is required
        </div></label
      >
      <input
        data-test="userform-firstname"
        formControlName="firstName"
        type="text"
        placeholder="Kari"
        (keyup)="handleKeyUp($event)"
        [class.error-input]="userForm.get('firstName')?.errors && formSubmitted"
      />
    </div>
    <div>
      <label
        for="lastName"
        [class.error-label]="userForm.get('lastName')?.errors && formSubmitted"
        >Lastname
        <div *ngIf="userForm.get('lastName')?.errors && formSubmitted">
          is required
        </div></label
      >
      <input
        data-test="userform-lastname"
        formControlName="lastName"
        type="text"
        placeholder="Nordmann"
        (keyup)="handleKeyUp($event)"
        [class.error-input]="userForm.get('lastName')?.errors && formSubmitted"
      />
    </div>
    <div>
      <label
        for="email"
        [class.error-label]="userForm.get('email')?.errors && formSubmitted"
        >Email
        <div
          *ngIf="userForm.get('email')?.hasError('required') && formSubmitted"
        >
          is required
        </div>
        <div *ngIf="userForm.get('email')?.hasError('email') && formSubmitted">
          is not valid
        </div></label
      >
      <input
        data-test="userform-email"
        formControlName="email"
        type="email"
        placeholder="kari.nordmann@petmanager.com"
        (keyup)="handleKeyUp($event)"
        [class.error-input]="userForm.get('email')?.errors && formSubmitted"
      />
    </div>
    <div>
      <label
        for="phone"
        [class.error-label]="userForm.get('phone')?.errors && formSubmitted"
        >Phone number
        <div
          *ngIf="userForm.get('phone')?.getError('required') && formSubmitted"
        >
          is required
        </div>
        <div
          *ngIf="userForm.get('phone')?.getError('minlength') && formSubmitted"
        >
          must be at least 8 characters
        </div></label
      >
      <input
        data-test="userform-phone"
        formControlName="phone"
        type="phone"
        placeholder="987 65 432"
        (keyup)="handleKeyUp($event)"
        [class.error-input]="userForm.get('phone')?.errors && formSubmitted"
      />
    </div>

    <ion-button
      data-test="userform-submit"
      expand="block"
      type="submit"
      [attr.disabled]="!userForm.dirty"
      >{{ submitButtonText }}</ion-button
    >
  </form>
</div>
